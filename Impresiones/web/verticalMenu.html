<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link href="css/iconFont.css" rel="stylesheet">
        <title>Vertical Navigation Menu: CSS3 Coded</title>

        <link rel="stylesheet" href="css/styles.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="wrapper">
            <ul class="menu">
                <li class="item1"><a href="#"><i class="icon-tag"></i> Pedidos <span>0</span></a>                    
                </li>
                <li class="item2"><a href="#"><i class="icon-comments-2"></i>Conversaciones </a>
                    <ul>
                        <li class="subitem1"><a href="#"><i class="icon-comments"></i>Chat</a></li>
                        <li class="subitem2"><a href="#"><i class="icon-comments-3"></i>Mensajes <span>0</span></a></li>                        
                    </ul>
                </li>
                <li class="item3"><a href="#"><i class="icon-cog"></i>Configuraci√≥n</a>
                    <ul>
                        <li class="subitem1"><a href="#" class="withSubItems"><i class="icon-user"></i>Perfil</a>
                        </li>                        
                        <li class="subitem2"><a href="#" class="withSubItems"><i class="icon-plus-2"></i>Cambiar estado </a>
                            <ul>
                                <li class="subitem1"><a href="#"><i class="icon-yelp"></i>Conectado</a></li>
                                <li class="subitem2"><a href="#"><i class="icon-yelp"></i>Desconectado </a></li>
                                <li class="subitem3"><a href="#"><i class="icon-yelp"></i>Ocupado</a></li>
                                <li class="subitem3"><a href="#"><i class="icon-yelp"></i>Ausente</a></li>
                            </ul>
                        </li>                        
                    </ul>
                </li>              
            </ul>

        </div>
        <script type="text/javascript">
            $(function() {

                var menu_ul = $('.menu > li > ul'),
                        menu_a = $('.menu > li > a'),
                        menu_aSub = $('.menu > li > ul > li a.withSubItems'),
                        menu_ulSub = $('.menu > li > ul > li ul');

                menu_ul.hide();
                menu_ulSub.hide();

                menu_a.click(function(e) {
                    e.preventDefault();
                    if (!$(this).hasClass('active')) {
                        menu_a.removeClass('active');
                        menu_ul.filter(':visible').slideUp('normal');
                        $(this).addClass('active').next().stop(true, true).slideDown('normal');
                    } else {
                        $(this).removeClass('active');
                        $(this).next().stop(true, true).slideUp('normal');
                    }
                });

                menu_aSub.click(function(ev) {
                    console.log(this);
                    if (!$(this).hasClass('active')) {
//                        $(this).removeClass('active');
//                        $(this).find('ul').slideDown('normal');
//                        $(this).addClass('active');
                        menu_aSub.removeClass('active');
                        $(this).find('i.icon-plus-2').attr('class','icon-minus-2');
//                        menu_ulSub.filter(':visible').slideUp('normal');
                        $(this).addClass('active').next().slideDown('normal');
                    } else {
                        $(this).removeClass('active');
                        $(this).find('i.icon-minus-2').attr('class','icon-plus-2');
//                        $(this).slideUp('normal');
                        $(this).removeClass('active');
                        $(this).next().slideUp('normal');
                    }
                });

            });
        </script>
    </body>  
</html>